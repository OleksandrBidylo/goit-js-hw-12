{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const axios = window.axios;\n\nconst API_KEY = '45354600-161e9d8fd3bcf6ec49a0bc2e6';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw new Error('Failed to fetch images');\n  }\n}\n","let lightbox;\n\nexport function renderGallery(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\" data-caption=\"${image.tags}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"g-image\">\n      <div class=\"info\">\n        <p class=\"i-text\"><span class=\"fat-el\">Likes</span> ${image.likes}</p>\n        <p class=\"i-text\"><span class=\"fat-el\">Views</span> ${image.views}</p>\n        <p class=\"i-text\"><span class=\"fat-el\">Comments</span> ${image.comments}</p>\n        <p class=\"i-text\"><span class=\"fat-el\">Downloads</span> ${image.downloads}</p>\n      </div>\n    </a>\n  `\n    )\n    .join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function renderError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, renderError } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('#load-more');\n\nlet query = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  query = event.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    renderError('Please enter a search query.');\n    return;\n  }\n\n  galleryContainer.innerHTML = '';\n  page = 1;\n  loadMoreButton.style.display = 'none';\n\n  try {\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0) {\n      renderError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      loadMoreButton.style.display = 'none';\n    } else {\n      renderGallery(data.hits);\n\n      if (data.hits.length < 15 || page * 15 >= data.totalHits) {\n        loadMoreButton.style.display = 'none';\n      } else {\n        loadMoreButton.style.display = 'flex';\n      }\n    }\n  } catch (error) {\n    renderError('Failed to fetch images. Please try again later.');\n    loadMoreButton.style.display = 'none';\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  page += 1;\n\n  try {\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0 || page * 15 >= data.totalHits) {\n      loadMoreButton.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      renderGallery(data.hits, true);\n\n      const { height: cardHeight } = document\n        .querySelector('.gallery')\n        .firstElementChild.getBoundingClientRect();\n\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    renderError('Failed to fetch images. Please try again later.');\n  }\n});\n"],"names":["axios","API_KEY","BASE_URL","fetchImages","query","page","perPage","url","error","lightbox","renderGallery","images","append","gallery","markup","image","renderError","message","searchForm","galleryContainer","loadMoreButton","event","data","cardHeight"],"mappings":"ssBAAA,MAAMA,EAAQ,OAAO,MAEfC,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAC1CG,CACD,CAAA,iEAAiEC,CAAI,aAAaC,CAAO,GAE1F,GAAI,CAEF,OADiB,MAAMN,EAAM,IAAIO,CAAG,GACpB,IACjB,OAAQC,EAAO,CACd,cAAQ,MAAMA,CAAK,EACb,IAAI,MAAM,wBAAwB,CACzC,CACH,CCjBA,IAAIC,EAEG,SAASC,EAAcC,EAAQC,EAAS,GAAO,CACpD,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAASH,EACZ,IACCI,GAAS;AAAA,eACAA,EAAM,aAAa,wCAAwCA,EAAM,IAAI;AAAA,kBAClEA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,8DAEMA,EAAM,KAAK;AAAA,8DACXA,EAAM,KAAK;AAAA,iEACRA,EAAM,QAAQ;AAAA,kEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI5E,EACA,KAAK,EAAE,EAENH,EACFC,EAAQ,mBAAmB,YAAaC,CAAM,EAE9CD,EAAQ,UAAYC,EAGjBL,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAI,eAAe,aAAc,CAC1C,SAAU,GACV,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEO,SAASO,EAAYC,EAAS,CACnC,SAAS,MAAM,CACb,MAAO,QACP,QAASA,CACb,CAAG,CACH,CCxCA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIhB,EAAQ,GACRC,EAAO,EAEXa,EAAW,iBAAiB,SAAU,MAAMG,GAAS,CAKnD,GAJAA,EAAM,eAAc,EAEpBjB,EAAQiB,EAAM,OAAO,SAAS,YAAY,MAAM,OAE5C,CAACjB,EAAO,CACVY,EAAY,8BAA8B,EAC1C,MACD,CAEDG,EAAiB,UAAY,GAC7Bd,EAAO,EACPe,EAAe,MAAM,QAAU,OAE/B,GAAI,CACF,MAAME,EAAO,MAAMnB,EAAYC,EAAOC,CAAI,EAEtCiB,EAAK,KAAK,SAAW,GACvBN,EACE,0EACR,EACMI,EAAe,MAAM,QAAU,SAE/BV,EAAcY,EAAK,IAAI,EAEnBA,EAAK,KAAK,OAAS,IAAMjB,EAAO,IAAMiB,EAAK,UAC7CF,EAAe,MAAM,QAAU,OAE/BA,EAAe,MAAM,QAAU,OAGpC,MAAe,CACdJ,EAAY,iDAAiD,EAC7DI,EAAe,MAAM,QAAU,MAChC,CACH,CAAC,EAEDA,EAAe,iBAAiB,QAAS,SAAY,CACnDf,GAAQ,EAER,GAAI,CACF,MAAMiB,EAAO,MAAMnB,EAAYC,EAAOC,CAAI,EAE1C,GAAIiB,EAAK,KAAK,SAAW,GAAKjB,EAAO,IAAMiB,EAAK,UAC9CF,EAAe,MAAM,QAAU,OAC/B,SAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,MACI,CACLV,EAAcY,EAAK,KAAM,EAAI,EAE7B,KAAM,CAAE,OAAQC,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACF,MAAe,CACdP,EAAY,iDAAiD,CAC9D,CACH,CAAC"}